// ============================================================
// ТЕМА: Аліаси в робочих процесах - практичні сценарії
// ОПИС: Демонстрація використання аліасів у реальних
//       робочих процесах та складних сценаріях
// ============================================================

describe('Аліаси в робочих процесах - практичні приклади', () => {
  // Підготовка: відкриваємо сторінку перед кожним тестом
  beforeEach(() => {
    cy.visit('/')
  })

  // Тест 1: Аліаси для складних селекторів
  // Аліаси особливо корисні для складних або довгих селекторів
  it('має використовувати аліаси для складних селекторів', () => {
    // Додаємо задачу спочатку
    cy.get('.new-todo').type('Задача{enter}')
    
    // Створюємо аліас для складного селектора після того, як елемент з'явився
    // Це робить код більш читабельним
    cy.get('.todo-list li .toggle').as('taskToggle')
    
    // Використовуємо простий аліас замість складного селектора
    cy.get('@taskToggle')
      .check()
    
    // Перевіряємо результат
    cy.get('.todo-list li')
      .should('have.class', 'completed')
  })

  // Тест 2: Аліаси для елементів, що змінюються
  // Аліаси корисні, коли елемент може змінюватися під час тесту
  it('має використовувати аліаси для елементів, що змінюються', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Динамічна задача{enter}')
    
    // Створюємо аліас для задачі
    cy.get('.todo-list li').first().as('firstTask')
    
    // Використовуємо аліас для відмітки
    cy.get('@firstTask')
      .find('.toggle')
      .check()
    
    // Елемент змінився (додався клас completed), але аліас все ще працює
    cy.get('@firstTask')
      .should('have.class', 'completed')
  })

  // Тест 3: Аліаси для групування операцій
  // Аліаси дозволяють групувати операції над одним елементом
  it('має використовувати аліаси для групування операцій', () => {
    // Створюємо аліас для поля вводу
    cy.get('.new-todo').as('input')
    
    // Виконуємо кілька операцій над одним елементом
    cy.get('@input')
      .should('be.visible')
      .type('Група операцій')
      .should('have.value', 'Група операцій')
      .clear()
      .should('have.value', '')
  })

  // Тест 4: Аліаси для повторного використання
  // Аліаси дозволяють повторно використовувати елементи без повторення селекторів
  it('має використовувати аліаси для повторного використання', () => {
    // Створюємо аліас один раз
    cy.get('.new-todo').as('todoInput')
    
    // Використовуємо аліас багато разів
    cy.get('@todoInput').type('Перша{enter}')
    cy.get('@todoInput').type('Друга{enter}')
    cy.get('@todoInput').type('Третя{enter}')
    
    // Перевіряємо результат
    cy.get('.todo-list li')
      .should('have.length', 3)
  })

  // Тест 5: Аліаси для вкладених елементів
  // Аліаси можна створювати для вкладених елементів
  it('має використовувати аліаси для вкладених елементів', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Задача з вкладеними елементами{enter}')
    
    // Створюємо аліас для задачі
    cy.get('.todo-list li').first().as('task')
    
    // Створюємо аліас для чекбокса всередині задачі
    cy.get('@task')
      .find('.toggle')
      .as('taskCheckbox')
    
    // Використовуємо обидва аліаси
    cy.get('@taskCheckbox')
      .check()
    
    cy.get('@task')
      .should('have.class', 'completed')
  })

  // Тест 6: Практичний сценарій - повний робочий процес
  // Використання аліасів у повному робочому процесі
  it('має використовувати аліаси у повному робочому процесі', () => {
    // Створюємо аліаси для всіх елементів, з якими будемо працювати
    cy.get('.new-todo').as('input')
    cy.get('.todo-list').as('list')
    
    // Додаємо задачу через аліас
    cy.get('@input')
      .type('Задача через аліас{enter}')
    
    // Перевіряємо через аліас
    cy.get('@list')
      .find('li')
      .should('have.length', 1)
    
    // Взаємодіємо через аліас
    cy.get('@list')
      .find('li')
      .first()
      .find('.toggle')
      .check()
    
    // Перевіряємо результат через аліас
    cy.get('@list')
      .find('li.completed')
      .should('have.length', 1)
  })
})

// ============================================================
// НАЙКРАЩІ ПРАКТИКИ для аліасів у робочих процесах:
// ============================================================
// 1. Створюйте аліаси для елементів, які використовуються багато разів
// 2. Використовуйте аліаси для складних селекторів
// 3. Створюйте аліаси на початку тесту для кращої читабельності
// 4. Використовуйте описові імена для аліасів
// 5. Групуйте операції над одним елементом через аліас
// 6. Використовуйте аліаси для елементів, що можуть змінюватися
// ============================================================
