// ============================================================
// ТЕМА: Повторне використання аліасів - багаторазове використання
// ОПИС: Демонстрація повторного використання аліасів
//       в різних частинах тесту та різних контекстах
// ============================================================

describe('Повторне використання аліасів', () => {
  // Підготовка: відкриваємо сторінку перед кожним тестом
  beforeEach(() => {
    cy.visit('/')
  })

  // Тест 1: Повторне використання в одному тесті
  // Аліас можна використовувати багато разів в одному тесті
  it('має повторно використовувати аліас в одному тесті', () => {
    // Створюємо аліас один раз
    cy.get('.new-todo').as('todoInput')
    
    // Використовуємо аліас для введення
    cy.get('@todoInput')
      .type('Перша задача')
    
    // Використовуємо той самий аліас для перевірки
    cy.get('@todoInput')
      .should('have.value', 'Перша задача')
    
    // Використовуємо аліас для очищення
    cy.get('@todoInput')
      .clear()
    
    // Використовуємо аліас для нового введення
    cy.get('@todoInput')
      .type('Друга задача')
      .type('{enter}')
    
    // Використовуємо аліас для перевірки, що поле очищено
    cy.get('@todoInput')
      .should('have.value', '')
  })

  // Тест 2: Аліаси в різних блоках тесту
  // Аліаси можна використовувати в різних частинах describe блоку
  it('має використовувати аліаси в різних блоках', () => {
    // Створюємо аліас
    cy.get('.new-todo').as('input')
    
    // Використовуємо в першій частині
    cy.get('@input')
      .type('Задача 1{enter}')
    
    // Використовуємо в другій частині
    cy.get('@input')
      .type('Задача 2{enter}')
    
    // Використовуємо в третій частині
    cy.get('@input')
      .type('Задача 3{enter}')
    
    // Перевіряємо результат
    cy.get('.todo-list li')
      .should('have.length', 3)
  })

  // Тест 3: Аліаси для різних операцій
  // Один аліас можна використовувати для різних типів операцій
  it('має використовувати аліас для різних операцій', () => {
    // Створюємо аліас
    cy.get('.new-todo').as('input')
    
    // Операція 1: Перевірка видимості
    cy.get('@input')
      .should('be.visible')
    
    // Операція 2: Введення тексту
    cy.get('@input')
      .type('Тестова задача')
    
    // Операція 3: Перевірка значення
    cy.get('@input')
      .should('have.value', 'Тестова задача')
    
    // Операція 4: Очищення
    cy.get('@input')
      .clear()
    
    // Операція 5: Фокус
    cy.get('@input')
      .focus()
      .should('be.focused')
  })

  // Тест 4: Аліаси для елементів, що з'являються динамічно
  // Аліаси корисні для елементів, які з'являються після дій
  it('має використовувати аліаси для динамічних елементів', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Динамічна задача{enter}')
    
    // Створюємо аліас для новоствореної задачі
    cy.get('.todo-list li').first().as('newTask')
    
    // Використовуємо аліас для перевірки
    cy.get('@newTask')
      .should('contain', 'Динамічна задача')
    
    // Використовуємо аліас для відмітки
    cy.get('@newTask')
      .find('.toggle')
      .check()
    
    // Використовуємо аліас для перевірки стану
    cy.get('@newTask')
      .should('have.class', 'completed')
  })

  // Тест 5: Аліаси для складних ланцюжків
  // Аліаси спрощують складні ланцюжки команд
  it('має використовувати аліаси для спрощення ланцюжків', () => {
    // Створюємо аліас для списку
    cy.get('.todo-list').as('list')
    
    // Додаємо задачу
    cy.get('.new-todo').type('Задача{enter}')
    
    // Використовуємо аліас замість довгого ланцюжка
    // Замість: cy.get('.todo-list').find('li').first().find('.toggle')
    cy.get('@list')
      .find('li')
      .first()
      .find('.toggle')
      .as('toggle')
    
    // Використовуємо новий аліас
    cy.get('@toggle')
      .check()
    
    // Перевіряємо через аліас списку
    cy.get('@list')
      .find('li.completed')
      .should('have.length', 1)
  })

  // Тест 6: Практичний приклад - багаторазове використання
  // Реальний сценарій з багаторазовим використанням аліасів
  it('має демонструвати багаторазове використання в практичному сценарії', () => {
    // Створюємо аліаси для всіх елементів
    cy.get('.new-todo').as('input')
    cy.get('.todo-list').as('list')
    
    // Додаємо кілька задач через аліас
    cy.get('@input').type('Задача 1{enter}')
    cy.get('@input').type('Задача 2{enter}')
    cy.get('@input').type('Задача 3{enter}')
    
    // Перевіряємо через аліас
    cy.get('@list')
      .find('li')
      .should('have.length', 3)
    
    // Взаємодіємо через аліаси
    cy.get('@list')
      .find('li')
      .first()
      .find('.toggle')
      .check()
    
    // Перевіряємо результат через аліас
    cy.get('@list')
      .find('li.completed')
      .should('have.length', 1)
  })
})

// ============================================================
// ПЕРЕВАГИ повторного використання аліасів:
// ============================================================
// 1. Покращена читабельність - не потрібно повторювати складні селектори
// 2. Легша підтримка - зміна селектора в одному місці
// 3. Менше помилок - менше місць для помилок у селекторах
// 4. Краща організація - логічне групування операцій
// 5. Швидша розробка - можна швидше писати тести
// ============================================================
