// ============================================================
// ТЕМА: Підтримувані тести - best practices для підтримки
// ОПИС: Демонстрація практик для створення підтримуваних тестів
// ============================================================

describe('Підтримувані тести - best practices', () => {
  // Підготовка: відкриваємо сторінку перед кожним тестом
  beforeEach(() => {
    cy.visit('/')
  })

  // Тест 1: Використання аліасів для покращення читабельності
  // Аліаси роблять тести більш читабельними та легшими для підтримки
  it('має використовувати аліаси для читабельності', () => {
    // Створюємо аліаси для основних елементів
    cy.get('.new-todo').as('input')
    cy.get('.todo-list').as('list')
    
    // Використовуємо аліаси замість повторення селекторів
    cy.get('@input').type('Задача{enter}')
    cy.get('@list').find('li').should('have.length', 1)
    
    // КОМЕНТАР: Аліаси роблять код більш читабельним та легшим для зміни
  })

  // Тест 2: Використання змінних для селекторів
  // Зберігання селекторів у змінних спрощує підтримку
  it('має використовувати змінні для селекторів', () => {
    // Зберігаємо селектори у змінних
    const todoInput = '.new-todo'
    const todoList = '.todo-list'
    
    // Використовуємо змінні замість повторення рядків
    cy.get(todoInput).type('Задача{enter}')
    cy.get(todoList).find('li').should('have.length', 1)
    
    // КОМЕНТАР: Якщо селектор зміниться, потрібно змінити тільки змінну
  })

  // Тест 3: Розділення тестів на логічні блоки
  // Кожен тест має перевіряти одну конкретну функціональність
  it('має перевіряти одну функціональність', () => {
    // Цей тест перевіряє тільки додавання задачі
    cy.get('.new-todo').type('Проста задача{enter}')
    cy.get('.todo-list li').should('have.length', 1)
    
    // КОМЕНТАР: Не змішуйте різні перевірки в одному тесті
  })

  // Тест 4: Використання описових назв
  // Назви тестів мають чітко описувати, що перевіряється
  it('має мати описову назву тесту', () => {
    // Назва тесту має описувати очікувану поведінку
    cy.get('.new-todo').should('be.visible')
    
    // КОМЕНТАР: Погано: it('test 1', ...)
    // Добре: it('має відображати поле вводу задач', ...)
  })

  // Тест 5: Використання коментарів для складних частин
  // Коментарі допомагають зрозуміти складну логіку
  it('має містити коментарі для складних частин', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Задача{enter}')
    
    // Складна перевірка: знаходимо задачу, потім її чекбокс, потім відмічаємо
    cy.get('.todo-list li')
      .first()
      .find('.toggle')
      .check()
    
    // Перевіряємо результат
    cy.get('.todo-list li.completed').should('have.length', 1)
    
    // КОМЕНТАР: Коментарі допомагають зрозуміти навіть складну логіку
  })
})

// ============================================================
// НАЙКРАЩІ ПРАКТИКИ для підтримуваних тестів:
// ============================================================
// 1. Використовуйте аліаси для часто використовуваних елементів
// 2. Зберігайте селектори у змінних для легшої зміни
// 3. Розділяйте тести на логічні блоки (один тест = одна перевірка)
// 4. Використовуйте описові назви тестів
// 5. Додавайте коментарі для складних частин
// 6. Уникайте дублювання коду
// ============================================================
