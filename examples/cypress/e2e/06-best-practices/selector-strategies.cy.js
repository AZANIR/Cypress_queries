// ============================================================
// ТЕМА: Стратегії вибору селекторів - best practices
// ОПИС: Демонстрація правильних стратегій вибору селекторів
//       для стабільних та підтримуваних тестів
// ============================================================

describe('Стратегії вибору селекторів - best practices', () => {
  // Підготовка: відкриваємо сторінку перед кожним тестом
  beforeEach(() => {
    cy.visit('/')
  })

  // Тест 1: Використання data-атрибутів (найкраща практика)
  // data-cy, data-testid - найстабільніші селектори
  it('має використовувати data-атрибути для стабільних селекторів', () => {
    // У реальних проектах додавайте data-cy або data-testid до елементів
    // cy.get('[data-cy="todo-input"]') - приклад використання data-cy
    // Це найстабільніший спосіб, бо не залежить від стилів або структури
    
    // У TodoMVC немає data-атрибутів, тому використовуємо класи
    // Але в реальних проектах завжди віддавайте перевагу data-атрибутам
    cy.get('.new-todo')
      .should('be.visible')
    
    // КОМЕНТАР: У вашому проекті додайте data-cy="todo-input" до input
    // і використовуйте cy.get('[data-cy="todo-input"]')
  })

  // Тест 2: Уникання селекторів, що залежать від стилів
  // Не використовуйте класи, пов'язані зі стилями (наприклад, .red-button)
  it('має уникати селекторів, що залежать від стилів', () => {
    // Погано: cy.get('.red-button') - якщо зміниться колір, тест впаде
    // Добре: cy.get('[data-cy="submit-button"]') - не залежить від стилів
    
    // У TodoMVC використовуємо семантичні класи
    cy.get('.new-todo')
      .should('exist')
    
    // КОМЕНТАР: Уникайте класів типу .red, .large, .hidden
    // Використовуйте семантичні класи або data-атрибути
  })

  // Тест 3: Уникання селекторів, що залежать від позиції
  // Не використовуйте :nth-child() для важливих елементів
  it('має уникати селекторів, що залежать від позиції', () => {
    // Додаємо задачі
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.new-todo').type('Задача 2{enter}')
    
    // Погано: cy.get('.todo-list li:nth-child(2)') - залежить від позиції
    // Добре: cy.contains('.todo-list li', 'Задача 2') - залежить від тексту
    
    // Кращий підхід - пошук за текстом
    cy.contains('.todo-list li', 'Задача 2')
      .should('exist')
    
    // КОМЕНТАР: :nth-child() можна використовувати тільки для тестів структури,
    // але не для важливих елементів
  })

  // Тест 4: Використання семантичних селекторів
  // Віддавайте перевагу селекторам, що описують призначення елемента
  it('має використовувати семантичні селектори', () => {
    // Семантичні селектори описують призначення, а не вигляд
    // .new-todo - описує призначення (нове завдання)
    // .todo-list - описує призначення (список завдань)
    
    cy.get('.new-todo')
      .should('exist')
    
    cy.get('.todo-list')
      .should('exist')
    
    // КОМЕНТАР: Використовуйте селектори, що описують функцію елемента
  })

  // Тест 5: Комбінація селекторів для точності
  // Комбінуйте селектори для більшої точності та стабільності
  it('має комбінувати селектори для точності', () => {
    // Комбінація тега та класу більш специфічна
    cy.get('input.new-todo')
      .should('exist')
    
    // Комбінація тега, класу та атрибута ще більш специфічна
    cy.get('input.new-todo[type="text"]')
      .should('exist')
    
    // КОМЕНТАР: Більш специфічні селектори менш схильні до помилок
  })
})

// ============================================================
// РЕКОМЕНДОВАНІ СТРАТЕГІЇ вибору селекторів (від найкращої):
// ============================================================
// 1. data-cy або data-testid - найкраще (не залежить від стилів/структури)
// 2. Семантичні класи - добре (описують призначення)
// 3. ID - добре (якщо стабільний)
// 4. Комбіновані селектори - прийнятно (тег + клас + атрибут)
// 5. Текст через contains() - прийнятно (для пошуку за текстом)
// 6. :nth-child() - уникайте (залежить від позиції)
// 7. Класи стилів - уникайте (залежать від стилів)
// ============================================================
