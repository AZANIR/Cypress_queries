// ============================================================
// ТЕМА: Методи first() та last() - робота з першим та останнім елементом
// ОПИС: Демонстрація використання first() та last()
//       для вибору першого та останнього елемента з колекції
// ============================================================

describe('Методи first() та last() - перший та останній елемент', () => {
  // Підготовка: відкриваємо сторінку та додаємо тестові дані
  beforeEach(() => {
    cy.visit('/')
    cy.get('.new-todo').type('Перша задача{enter}')
    cy.get('.new-todo').type('Друга задача{enter}')
    cy.get('.new-todo').type('Третя задача{enter}')
  })

  // Тест 1: Базове використання first()
  // first() - вибирає перший елемент з колекції
  it('має вибрати перший елемент через first()', () => {
    // cy.get('.todo-list li') - знаходимо всі задачі
    // .first() - вибираємо перший елемент
    cy.get('.todo-list li')
      .first()
      // Перевіряємо, що це дійсно перша задача
      .should('contain', 'Перша задача')
  })

  // Тест 2: Базове використання last()
  // last() - вибирає останній елемент з колекції
  it('має вибрати останній елемент через last()', () => {
    // cy.get('.todo-list li') - знаходимо всі задачі
    // .last() - вибираємо останній елемент
    cy.get('.todo-list li')
      .last()
      // Перевіряємо, що це дійсно остання задача
      .should('contain', 'Третя задача')
  })

  // Тест 3: first() та last() для взаємодії
  // Можна одразу взаємодіяти з першим або останнім елементом
  it('має взаємодіяти з першим та останнім елементом', () => {
    // Відмічаємо першу задачу
    cy.get('.todo-list li')
      .first()
      .find('.toggle')
      .check()
    
    // Перевіряємо, що перша задача відмічена
    cy.get('.todo-list li')
      .first()
      .should('have.class', 'completed')
    
    // Відмічаємо останню задачу
    cy.get('.todo-list li')
      .last()
      .find('.toggle')
      .check()
    
    // Перевіряємо, що остання задача відмічена
    cy.get('.todo-list li')
      .last()
      .should('have.class', 'completed')
  })

  // Тест 4: Комбінація first() та last() з іншими методами
  // first() та last() можна комбінувати з іншими методами
  it('має комбінувати first() та last() з іншими методами', () => {
    // Знаходимо чекбокс першої задачі
    cy.get('.todo-list li')
      .first()
      .find('.toggle')
      .should('exist')
    
    // Знаходимо текст останньої задачі
    cy.get('.todo-list li')
      .last()
      .should('contain', 'Третя задача')
  })

  // Тест 5: Практичний приклад - робота з першим та останнім
  // Реальний сценарій використання first() та last()
  it('має демонструвати практичне використання first() та last()', () => {
    // Відмічаємо першу задачу
    cy.get('.todo-list li')
      .first()
      .find('.toggle')
      .check()
    
    // Відмічаємо останню задачу
    cy.get('.todo-list li')
      .last()
      .find('.toggle')
      .check()
    
    // Перевіряємо, що середня задача залишилася активною
    cy.get('.todo-list li')
      .eq(1)
      .should('not.have.class', 'completed')
  })
})

// ============================================================
// ВАЖЛИВІ ЗАУВАЖЕННЯ про first() та last():
// ============================================================
// 1. first() вибирає перший елемент з колекції
// 2. last() вибирає останній елемент з колекції
// 3. Обидва методи працюють на вже знайдених елементах
// 4. first() та last() зручніші за eq(0) та eq(n-1)
// 5. Використовуйте first() та last() для читабельності коду
// ============================================================
