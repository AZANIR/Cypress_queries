// ============================================================
// ТЕМА: Метод cy.get() - основний спосіб пошуку елементів
// ОПИС: Демонстрація різних способів використання cy.get()
//       для пошуку елементів на сторінці
// ============================================================

describe('Метод cy.get() - основні можливості', () => {
  // Підготовка: відкриваємо сторінку перед кожним тестом
  beforeEach(() => {
    cy.visit('/')
  })

  // Тест 1: Базове використання cy.get() з CSS селектором
  // cy.get() - це основна команда Cypress для пошуку елементів
  it('має знайти елемент за допомогою CSS селектора', () => {
    // cy.get('.new-todo') - знаходить елемент з класом 'new-todo'
    // cy.get() автоматично чекає на появу елемента (до 4 секунд за замовчуванням)
    // Це називається "автоматичне очікування" - одна з ключових можливостей Cypress
    cy.get('.new-todo')
      // .should('be.visible') - перевіряє, що елемент видимий
      // should() - команда для асертів (перевірок)
      .should('be.visible')
  })

  // Тест 2: cy.get() з різними типами селекторів
  // cy.get() підтримує різні типи селекторів: класи, ID, теги, атрибути
  it('має працювати з різними типами селекторів', () => {
    // Пошук за класом (найпоширеніший спосіб)
    // Крапка (.) перед назвою означає клас CSS
    cy.get('.new-todo')
      .should('exist')
    
    // Пошук за HTML тегом
    // Просто назва тега без додаткових символів
    cy.get('h1')
      .should('contain', 'todos')
    
    // Пошук за атрибутом
    // Квадратні дужки [] використовуються для атрибутів
    cy.get('[type="text"]')
      .should('be.visible')
    
    // Пошук за ID (якщо б він був)
    // Решітка (#) перед назвою означає ID
    // У TodoMVC немає ID, тому це приклад для демонстрації
    // cy.get('#myId') - приклад пошуку за ID
  })

  // Тест 3: cy.get() знаходить множину елементів
  // cy.get() може знайти кілька елементів одночасно
  it('має знайти кілька елементів одночасно', () => {
    // Додаємо кілька задач для демонстрації
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.new-todo').type('Задача 2{enter}')
    cy.get('.new-todo').type('Задача 3{enter}')
    
    // cy.get('.todo-list li') - знаходить ВСІ елементи li всередині .todo-list
    // Результат - це масив елементів, а не один елемент
    cy.get('.todo-list li')
      // .should('have.length', 3) - перевіряє кількість знайдених елементів
      // Має бути рівно 3 елементи
      .should('have.length', 3)
  })

  // Тест 4: cy.get() з опціями
  // cy.get() приймає другий параметр - об'єкт опцій
  it('має використовувати опції для налаштування пошуку', () => {
    // cy.get(селектор, { timeout: 10000 }) - встановлює таймаут 10 секунд
    // За замовчуванням таймаут 4 секунди, але можна змінити
    // Це корисно для повільних елементів або динамічного контенту
    cy.get('.new-todo', { timeout: 10000 })
      .should('be.visible')
    
    // cy.get(селектор, { multiple: true }) - дозволяє знайти кілька елементів
    // За замовчуванням cy.get() очікує один елемент
    // multiple: true дозволяє знайти 0 або більше елементів
    cy.get('.todo-list li', { multiple: true })
      // Якщо елементів немає, тест не впаде
      .should('have.length', 0)
  })

  // Тест 5: Комбіновані селектори в cy.get()
  // Можна комбінувати різні типи селекторів для точнішого пошуку
  it('має використовувати комбіновані селектори', () => {
    // Комбінація тега та класу
    // 'input.new-todo' - знаходить input елемент з класом new-todo
    cy.get('input.new-todo')
      .should('exist')
    
    // Комбінація тега, класу та атрибута
    // 'input.new-todo[type="text"]' - ще більш специфічний селектор
    cy.get('input.new-todo[type="text"]')
      .should('be.visible')
    
    // Комбінація з вкладеними елементами
    // '.todo-list li' - знаходить li всередині .todo-list
    // Пробіл означає "будь-який нащадок" (не обов'язково прямий)
    cy.get('.todo-list li')
      // Поки що список порожній
      .should('have.length', 0)
  })

  // Тест 6: cy.get() з псевдокласами
  // CSS псевдокласи дозволяють вибирати елементи за станом або позицією
  it('має використовувати псевдокласи для вибору', () => {
    // Додаємо задачі
    cy.get('.new-todo').type('Перша{enter}')
    cy.get('.new-todo').type('Друга{enter}')
    
    // :first-child - перший дочірній елемент
    cy.get('.todo-list li:first-child')
      .should('contain', 'Перша')
    
    // :last-child - останній дочірній елемент
    cy.get('.todo-list li:last-child')
      .should('contain', 'Друга')
    
    // :nth-child(n) - n-й дочірній елемент (нумерація з 1!)
    cy.get('.todo-list li:nth-child(1)')
      .should('contain', 'Перша')
  })

  // Тест 7: cy.get() та автоматичне очікування
  // Одне з головних переваг Cypress - автоматичне очікування появи елементів
  it('має автоматично чекати на появу елементів', () => {
    // Навіть якщо елемент з'являється не одразу, cy.get() буде чекати
    // Це працює для динамічного контенту, який завантажується асинхронно
    cy.get('.new-todo')
      // Елемент буде знайдено, навіть якщо він з'явиться через кілька мілісекунд
      .should('be.visible')
      // Можна одразу взаємодіяти з елементом
      .type('Тестова задача')
      .should('have.value', 'Тестова задача')
    .type('{enter}')
    .should('have.value', '')
  })
})

// ============================================================
// ВАЖЛИВІ ЗАУВАЖЕННЯ про cy.get():
// ============================================================
// 1. cy.get() автоматично чекає на появу елемента (до 4 сек за замовчуванням)
// 2. cy.get() повертає jQuery об'єкт, тому можна використовувати jQuery методи
// 3. cy.get() може знайти кілька елементів - результат буде масивом
// 4. Якщо елемент не знайдено за таймаут, тест впаде з помилкою
// 5. cy.get() працює тільки з елементами, які вже є в DOM
// 6. Для пошуку за текстом використовуйте cy.contains() замість cy.get()
// ============================================================
